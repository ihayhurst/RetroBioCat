{% extends "base.html" %}
{% set active_page = "experimental_menu" %}


{% block content %}

    <div class="container-fluid">
        <div id="save_response"></div>
        <div class="row">
            <div class="col"></div>
            <div class="col-8">
                <div class="card card-form my-5">
                    <div class="card-body">
                        <h3 class="card-title text-center">Admin for running blast searches</h3>
                        <div class="row mt-5">
                            <div class="col"></div>
                            <div class="col-8">
                                <div class="container">

                                {% for enz_type in blasted_enz_types %}
                                    <div class="my-2">
                                        <h6 class="mt-3">{{ enz_type }}</h6>
                                        <div class="progress">
                                            <div class="progress-bar" role="progressbar" style="width: {{blasted_enz_types[enz_type]}}%"></div>
                                        </div>
                                        <button class="btn btn-sm btn-outline-secondary" onclick="queue_blast_search('{{enz_type}}')">Queue blasts for {{enz_type}}</button>
                                    </div>
                                {% endfor %}

                                </div>
                            </div>
                            <div class="col"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col"></div>
        </div>
    </div>

    <script>


        function queue_blast_search(enzyme_type) {
            $.post('/_find_homologs', {
                enzyme_type: enzyme_type
                }).done(function(data) {
                    response_msg(data.result.msg, data.result.status, data.result.issues, "save_response")
                    location.reload()
                })
        }



    </script>

{% endblock %}