{% extends "base.html" %}
{% set active_page = "contributions_menu" %}


{% block content %}
    <div id="save_response"></div>
    <div class="container-fluid">
        <div class="row">
            <div class="col"></div>
            <div class="col">
                <div class="card card-form my-5" style="width: 50rem;">
                    <div class="card-body" align="center">
                        <h3 class="card-title">Admin functions</h3>
                        <div id="'save_response"></div>

                        <button class="btn btn-info" onclick="assign_papers()" id="assign_papers">Assign papers</button>
                        <button class="btn btn-danger" onclick="delete_sequences_no_paper()" id="delete_seqs">Delete sequences with no papers</button>
                        <button class="btn btn-warning" onclick="orphan_enzymes()" id="orphan_enzymes_id">Find orphan enzymes</button>
                        <button class="btn btn-success" onclick="find_tags()">Find tags</button>
                        <button class="btn btn-primary" onclick="convert_to_pdb_schema()">convert_to_pdb_schema</button>
                        <button class="btn btn-info" onclick="clear_all_redis_jobs()">Clear all redis jobs</button>
                        <button class="btn btn-success" onclick="ensure_correct_sequence_naming()">Ensure correct sequence naming</button>
                        <button class="btn btn-warning" onclick="update_reviewed()">Update reviewed status</button>
                        <button class="btn btn-info" onclick="mongo_dump()">Mongo dump</button>
                        <button class="btn btn-danger" onclick="reblast()">Reblast UniRef50</button>
                        <button class="btn btn-success" onclick="clear_empty_ssns()">Clear empty SSN records</button>

                    </div>
                </div>
            </div>
            <div class="col"></div>
        </div>
    </div>


    <script>
        function assign_papers() {
            $.post('/_assign_papers', {
                }).done(function(data) {
                    response_msg(data.result.msg, data.result.status, data.result.issues, "save_response")
                })
            }

        function delete_sequences_no_paper() {
            $.post('/_delete_sequences_no_paper', {
                }).done(function(data) {
                    response_msg(data.result.msg, data.result.status, data.result.issues, "save_response")
                })
            }

        function orphan_enzymes() {
            $.post('/_orphan_enzymes', {
                }).done(function(data) {
                    response_msg(data.result.msg, data.result.status, data.result.issues, "save_response")
                })
            }

        function find_tags() {
            $.post('/_find_tags', {
                }).done(function(data) {
                    response_msg(data.result.msg, data.result.status, data.result.issues, "save_response")
                })
            }

        function convert_to_pdb_schema() {
            $.post('/_convert_to_pdb_schema', {
                }).done(function(data) {
                    response_msg(data.result.msg, data.result.status, data.result.issues, "save_response")
                })
            }

        function clear_all_redis_jobs() {
            $.post('/_clear_all_redis_jobs', {
                }).done(function(data) {
                    response_msg(data.result.msg, data.result.status, data.result.issues, "save_response")
                })
            }

        function ensure_correct_sequence_naming() {
            $.post('/_ensure_correct_sequence_naming', {
                }).done(function(data) {
                    response_msg(data.result.msg, data.result.status, data.result.issues, "save_response")
                })
            }

        function update_reviewed() {
            $.post('/_update_reviewed_status', {
                }).done(function(data) {
                    response_msg(data.result.msg, data.result.status, data.result.issues, "save_response")
                })
            }

        function mongo_dump() {
            $.post('/_mongo_dump', {
                }).done(function(data) {
                    response_msg(data.result.msg, data.result.status, data.result.issues, "save_response")
                })
            }

        function reblast() {
            $.post('/_set_all_seqs_to_reblast', {
                }).done(function(data) {
                    response_msg(data.result.msg, data.result.status, data.result.issues, "save_response")
                })
            }

        function clear_empty_ssns() {
            $.post('/_clear_empty_ssns', {
                }).done(function(data) {
                    response_msg(data.result.msg, data.result.status, data.result.issues, "save_response")
                })
            }








    </script>

{% endblock %}